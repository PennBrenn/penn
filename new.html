<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Pennbrenn.com | About</title>
  <meta name="description" content="The official website of Penn Brenn / William Villongco.">
  <link rel="icon" type="image/png" href="Images/favicon96.png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Poppins:wght@600;700&display=swap"
    rel="stylesheet">
  <style>
    :root{
      --bg-color:#071019;
      --text-color:#e6eef2;
      --accent:#25818e;
      --glass-bg: rgba(10,14,18,0.55);
      --glass-border: rgba(255,255,255,0.08);
      --font-main: 'Inter', sans-serif;
      --font-head: 'Poppins', sans-serif;
    }
    /* reset */
    *{box-sizing:border-box;margin:0;padding:0}
    html,body,#bgCanvasWrap{height:100%}
    body{
      font-family:var(--font-main);
      color:var(--text-color);
      background:var(--bg-color);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      overflow-x:hidden;
    }

    /* background canvas container */
    #bgCanvasWrap{
      position:fixed;
      inset:0;
      z-index:0;
      pointer-events:none; /* let clicks pass through except on stars (we will enable for them) */
    }
    canvas{display:block;width:100%;height:100%}

    /* page layout */
    .page{
      position:relative;
      z-index:10;
      max-width:1100px;
      margin:0 auto;
      padding:2rem 1rem 6rem;
    }
    .site-header{
      position:sticky;
      top:0;
      z-index:50;
      backdrop-filter: blur(6px);
      background: linear-gradient(180deg, rgba(6,10,12,0.6), rgba(6,10,12,0.35));
      border-bottom:1px solid var(--glass-border);
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding:12px 18px;
    }
    .brand{font-family:var(--font-head); font-weight:700; font-size:1.2rem}
    .brand span{color:var(--accent)}
    /* center music control */
    .header-controls{
      display:flex;
      align-items:center;
      gap:10px;
      justify-content:center;
      width:100%;
    }
    .music-btn{
      display:flex;
      align-items:center;
      justify-content:center;
      width:48px;
      height:48px;
      border-radius:12px;
      border:1px solid var(--glass-border);
      background:rgba(255,255,255,0.02);
      cursor:pointer;
      margin:0 12px;
    }
    .music-btn:hover{transform:translateY(-3px);box-shadow:0 6px 18px rgba(0,0,0,0.6)}

    /* main glass sections */
    .glass-panel{
      background:var(--glass-bg);
      border:1px solid var(--glass-border);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border-radius:12px;
      padding:20px;
      margin:20px 0;
      box-shadow: 0 8px 30px rgba(0,0,0,0.45);
    }

    h1,h2,h3{font-family:var(--font-head); color:#fff}
    h1{font-size:2.2rem}
    h2{font-size:1.4rem; color:var(--accent); border-bottom:2px solid rgba(37,129,142,0.12); padding-bottom:6px; display:inline-block}

    .hero-grid{
      display:grid;
      grid-template-columns:1fr;
      gap:18px;
    }
    @media(min-width:800px){ .hero-grid{grid-template-columns: 2fr 1fr} }

    .profile-pic{width:100%; max-width:300px; border:3px solid var(--accent); border-radius:10px; display:block; margin:0 auto}

    .links-grid{display:grid; grid-template-columns:repeat(auto-fill,minmax(140px,1fr)); gap:10px; margin-top:12px}
    .site-card{
      padding:12px;
      border-radius:8px;
      background:rgba(255,255,255,0.02);
      border:1px solid rgba(255,255,255,0.03);
      transition:transform .2s, box-shadow .2s;
      font-weight:600;
      text-decoration:none;
      color:inherit;
      display:flex;
      gap:10px;
      align-items:center;
    }
    .site-card:hover{transform:translateY(-6px); box-shadow:0 8px 22px rgba(37,129,142,0.12)}

    .card-grid{display:grid; gap:16px}
    @media(min-width:600px){ .card-grid{grid-template-columns:repeat(2,1fr)} }
    .card{background:rgba(0,0,0,0.25); border-radius:10px; overflow:hidden}

    /* modal for star facts */
    .modal-backdrop{
      position:fixed; inset:0; display:flex; align-items:center; justify-content:center; z-index:60;
      background:rgba(0,0,0,0.6);
    }
    .modal{
      background:linear-gradient(180deg, #071019, #09121a);
      border:1px solid var(--glass-border);
      padding:18px; border-radius:12px; max-width:420px; width:90%;
      box-shadow:0 12px 40px rgba(0,0,0,0.6);
    }
    .modal h3{margin-bottom:8px}
    .close-btn{display:inline-block;padding:6px 10px;border-radius:8px;background:rgba(255,255,255,0.03);cursor:pointer;margin-top:10px}

    /* hear my voice */
    .voice-row{display:flex; gap:10px; align-items:center; margin-top:10px;}
    .voice-row input[type="text"]{flex:1; padding:10px;border-radius:8px;border:1px solid var(--glass-border); background:rgba(255,255,255,0.01); color:var(--text-color)}
    .voice-row button{padding:10px 14px;border-radius:8px;background:var(--accent); border:none;color:#fff; cursor:pointer}

    /* small helpers */
    .muted{opacity:0.75; font-size:0.95rem}
    footer{margin-top:40px;text-align:center;color:#9aa6ac;font-size:0.9rem}
    a.external{opacity:0.95}
    .for-business{background:linear-gradient(90deg, rgba(37,129,142,0.06), rgba(37,129,142,0.02)); padding:14px; border-radius:8px}
  </style>
</head>
<body>
  <!-- BACKGROUND CANVAS -->
  <div id="bgCanvasWrap">
    <canvas id="bgCanvas"></canvas>
  </div>

  <!-- PAGE -->
  <header class="site-header">
    <div style="display:flex;gap:12px;align-items:center">
      <a class="brand" href="/"> <span>P</span>enn<span>B</span>renn<small style="font-size:0.7rem; margin-left:6px">.com</small></a>
      <nav style="display:flex;gap:10px;align-items:center">
        <a href="#sites" style="font-size:0.9rem; text-decoration:underline; color:inherit">Sites</a>
      </nav>
    </div>

    <div class="header-controls" aria-hidden="false">
      <button id="musicToggle" class="music-btn" title="Play / Pause background music" aria-label="Toggle background music">‚ñ∂</button>
    </div>

    <div style="width:140px; text-align:right; font-size:0.9rem; opacity:0.95">
      <a href="mailto:william@pennbrenn.com" style="color:inherit">Contact</a>
    </div>
  </header>

  <main class="page">
    <!-- HERO -->
    <section class="glass-panel">
      <div class="hero-grid">
        <div>
          <h1><span id="typewriter-word">Im Penn</span><span id="cursor" style="margin-left:6px">|</span></h1>
          <div style="margin-top:10px" class="muted">üá∫üá∏üè≥Ô∏è‚Äçüåà he/him ‚Äî public profile</div>

          <div style="margin-top:12px" class="muted status-bar">
            <div style="margin-right:12px">It is <span id="laTime">Loading...</span> (PST)</div>
            <div>There are <span id="days" style="color:var(--accent); font-weight:700">0</span> days until my birthday</div>
          </div>

          <p style="margin-top:12px">Hiiii im penn ‚Äî the name has no relation to historical figures. I keep geckos and lizards,
            enjoy starting projects and sometimes finishing them. I play airsoft, run a few businesses occasionally,
            and tinker with cameras and planes. I like making things and being silly.</p>
        </div>

        <div style="text-align:center">
          <img src="Images/me.jpg" alt="Penn/William Profile" class="profile-pic">
          <div class="muted" style="margin-top:8px">Profile ‚Äî put a high-res face/portrait here</div>
        </div>
      </div>
    </section>

    <!-- SITES -->
    <section id="sites" class="glass-panel">
      <h2>Sites</h2>
      <p class="muted">A curated list of my domains ‚Äî grouped by category.</p>

      <div style="margin-top:12px">
        <h3 style="font-size:1rem; margin-bottom:6px">Professional ‚ÄúStuff‚Äù</h3>
        <div class="links-grid">
          <a class="site-card external" href="https://cam.pennbrenn.com" target="_blank" rel="noreferrer">
            <div>üì∏</div>
            <div>
              <div>penncamm</div>
              <div class="muted" style="font-size:0.85rem">Live camera</div>
            </div>
          </a>

          <a class="site-card external" href="https://www.pennbrenn.com" target="_blank" rel="noreferrer">
            <div>üßæ</div>
            <div>
              <div>about me</div>
              <div class="muted">Main site</div>
            </div>
          </a>
        </div>
      </div>

      <div style="margin-top:14px">
        <h3 style="font-size:1rem; margin-bottom:6px">Game ‚ÄúStuff‚Äù</h3>
        <div class="links-grid">
          <a class="site-card external" href="https://play.pennbrenn.com" target="_blank" rel="noreferrer">
            <div>üéÆ</div>
            <div><div>that game</div><div class="muted">one person has a different question</div></div>
          </a>
          <a class="site-card external" href="https://play.bbcjustice.top" target="_blank" rel="noreferrer">
            <div>üïπÔ∏è</div>
            <div><div>bbcjustice</div><div class="muted">play</div></div>
          </a>
          <a class="site-card external" href="https://sam.pennbrenn.com" target="_blank" rel="noreferrer">
            <div>üåæ</div>
            <div><div>sams aura farm simulator 2025</div><div class="muted">sam stuff</div></div>
          </a>
        </div>
      </div>

      <div style="margin-top:14px">
        <h3 style="font-size:1rem; margin-bottom:6px">Old ‚ÄúStuff‚Äù</h3>
        <div class="links-grid">
          <a class="site-card external" href="https://moveon.pennbrenn.com/" target="_blank" rel="noreferrer">
            <div>üì¶</div><div><div>move on lol</div><div class="muted">archive</div></div>
          </a>
          <a class="site-card external" href="https://2guys1mic.top" target="_blank" rel="noreferrer">
            <div>üéôÔ∏è</div><div><div>2g1m</div><div class="muted">old mic days</div></div>
          </a>
          <a class="site-card external" href="#" title="Missing / old games" aria-disabled="true">
            <div>‚ùì</div><div><div>old games</div><div class="muted">missing</div></div>
          </a>
        </div>
      </div>
    </section>

    <!-- Hear my voice -->
    <section class="glass-panel">
      <h2>Hear My Voice</h2>
      <p class="muted">Type up to 100 characters, click play ‚Äî audio is generated by ElevenLabs using the <em>william</em> voice.</p>

      <div class="voice-row">
        <input type="text" id="ttsText" placeholder="Write something (<=100 chars)" maxlength="100" />
        <button id="ttsSubmit">Speak</button>
        <div id="ttsStatus" class="muted" style="margin-left:8px">idle</div>
      </div>

      <audio id="ttsPlayback" controls style="width:100%; margin-top:12px; display:none"></audio>
      <div class="muted" style="margin-top:8px">Note: The serverless function calls ElevenLabs and returns MP3 for playback. API key is stored server-side only.</div>
    </section>

    <!-- Games, Pets, Hobbies (collapsed for brevity but kept) -->
    <section class="glass-panel">
      <h2>My Fav Games</h2>
      <div class="card-grid">
        <div class="card">
          <div style="padding:12px">
            <a class="card-title external" href="https://store.steampowered.com/app/573090/Stormworks_Build_and_Rescue/" target="_blank">#1 Stormworks</a>
            <div class="muted">Build anything simulator</div>
          </div>
        </div>
        <div class="card">
          <div style="padding:12px">
            <a class="card-title external" href="https://robertsspaceindustries.com/en/" target="_blank">#2 Star Citizen</a>
            <div class="muted">Do whatever simulator</div>
          </div>
        </div>
      </div>
    </section>

    <section class="glass-panel for-business">
      <h2>For Business</h2>
      <p class="muted">Sample info (edit later): Graduated high school. Available for freelance work, consulting, and collaborations. Email: william@pennbrenn.com</p>
      <p style="margin-top:8px">Services: web dev, game dev, systems tinkering, voice demo work.</p>
    </section>

    <section class="glass-panel">
      <h2>Misc / Hobbies</h2>
      <div class="muted">Airsoft, 3D printing, sailing, pets (geckos, cat), making gadgets, being cute.</div>
    </section>

    <footer>
      <p>&copy; 2025 Penn Brenn. All rights reserved.</p>
    </footer>
  </main>

  <!-- Modal container (for star facts) -->
  <div id="modalRoot" style="display:none"></div>

  <!-- Background audio element (music) -->
  <audio id="bgMusic" loop preload="none" src="Audio/bg-music.mp3"></audio>

  <script>
    // ---------- SMALL UI LOGIC ----------
    // Time + birthday
    function showLATime(){ const opts={timeZone:'America/Los_Angeles', hour:'numeric', minute:'numeric', second:'numeric', hour12:true}; document.getElementById('laTime').textContent = new Date().toLocaleTimeString('en-US',opts); }
    setInterval(showLATime,1000); showLATime();

    (function typewriter(){
      const words=["Im Penn","Im William"]; let i=0; let j=0; let dir=1;
      const el=document.getElementById('typewriter-word'); const cursor=document.getElementById('cursor');
      function step(){
        el.textContent = words[i].slice(0,j);
        j += dir;
        if(j > words[i].length){ dir=-1; setTimeout(step,1800); return }
        if(j < 0){ dir=1; i=(i+1)%words.length; j=0; }
        setTimeout(step, dir>0?80:30);
      } step();
      setInterval(()=>cursor.style.opacity = cursor.style.opacity==='0' ? '1' : '0',500);
    })();

    // Days until birthday (Nov 17)
    (function daysUntil(){
      const el=document.getElementById('days');
      function calc(){ const today=new Date(); let target=new Date(today.getFullYear(),10,17); if(today>target) target.setFullYear(target.getFullYear()+1); const diff=Math.ceil((target - today)/(1000*60*60*24)); el.textContent = diff; }
      calc(); setInterval(calc, 1000*60*60);
    })();

    // ---------- BACKGROUND: NIGHT SKY + AURORA + SHOOTING STARS ----------
    // Basic canvas animation creating subtle aurora bands and occasional shooting stars.
    (function background(){
      const canvas = document.getElementById('bgCanvas');
      const ctx = canvas.getContext('2d');
      let W = canvas.width = window.innerWidth;
      let H = canvas.height = window.innerHeight;

      window.addEventListener('resize', ()=>{ W = canvas.width = window.innerWidth; H = canvas.height = window.innerHeight; });

      // aurora bands parameters
      const bands = [];
      for(let i=0;i<3;i++){
        bands.push({
          y: H * (0.2 + i*0.2),
          amplitude: 80 + Math.random()*140,
          speed: 0.0008 + Math.random()*0.0012,
          hue: 160 + i*20, // green-teal
          phase: Math.random()*Math.PI*2
        });
      }

      // shooting stars store
      const stars = [];

      // create a shooting star periodically
      function spawnStar(){
        const startY = Math.random() * H * 0.5; // upper half
        const startX = Math.random() < 0.5 ? -50 : W + 50;
        const dir = startX < 0 ? 1 : -1;
        const length = 140 + Math.random()*160;
        const speed = 3 + Math.random()*3;
        const size = 3 + Math.random()*3;
        const id = Date.now().toString(36) + Math.random().toString(36).slice(2,6);

        // each star carries a hitbox for clicks (we'll expose it)
        const star = { id, x: startX, y: startY, vx: speed*dir, vy: 0.2*(Math.random()-0.5)*speed, length, size, life: 0, dir };
        star.clickable = true;
        stars.push(star);

        // automatically remove after some time
        setTimeout(()=>{ const idx = stars.findIndex(s=>s.id===id); if(idx>-1) stars.splice(idx,1); }, 8000 + Math.random()*4000);
      }

      // spawn a star every 3-7 seconds
      setInterval(spawnStar, 3500 + Math.random()*3500);

      // array of personal facts for star popups
      const starFacts = [
        "I keep mourning geckos and crested geckos.",
        "I run a HPA GBB Kriss Vector for airsoft.",
        "I once tried building an ultralight aircraft.",
        "I make things with a 3D printer.",
        "I have a cat named Trick.",
        "I enjoy sailing and building gadgets.",
        "I like starting projects and sometimes finishing them :)"
      ];

      // handle clicks on canvas: detect stars with a forgiving hitbox
      const canvasNode = canvas;
      canvasNode.style.pointerEvents = 'auto';
      canvasNode.addEventListener('click', function(e){
        const rect = canvasNode.getBoundingClientRect();
        const mx = e.clientX - rect.left;
        const my = e.clientY - rect.top;
        // find star within hit radius
        for(let s of stars){
          const sx = s.x + (s.dir === -1 ? -s.length/2 : s.length/2);
          const sy = s.y;
          const dx = mx - sx;
          const dy = my - sy;
          const dist = Math.sqrt(dx*dx + dy*dy);
          if(dist < Math.max(24, s.size*8)){ // forgiving hitbox
            // show popup with random fact
            showStarFact(starFacts[Math.floor(Math.random()*starFacts.length)], e.clientX, e.clientY);
            break;
          }
        }
      });

      // popup modal generator
      function showStarFact(text, cx, cy){
        const root = document.getElementById('modalRoot');
        root.innerHTML = '';
        const backdrop = document.createElement('div');
        backdrop.className = 'modal-backdrop';
        backdrop.style.pointerEvents = 'auto';
        const modal = document.createElement('div');
        modal.className = 'modal';
        modal.innerHTML = `<h3>Random Fact</h3><div style="margin-top:6px">${text}</div>`;
        const close = document.createElement('div');
        close.className = 'close-btn';
        close.textContent = 'Close';
        close.onclick = ()=>{ root.style.display = 'none'; root.innerHTML = ''; };
        modal.appendChild(close);
        backdrop.appendChild(modal);
        root.appendChild(backdrop);
        root.style.display = 'block';
      }

      // draw loop
      let t0 = performance.now();
      function draw(now){
        const dt = (now - t0)/1000;
        t0 = now;
        ctx.clearRect(0,0,W,H);

        // draw night sky gradient
        const g = ctx.createLinearGradient(0,0,0,H);
        g.addColorStop(0, '#021018');
        g.addColorStop(0.6, '#041622');
        g.addColorStop(1, '#03111a');
        ctx.fillStyle = g;
        ctx.fillRect(0,0,W,H);

        // draw faint distant stars
        ctx.save();
        for(let i=0;i<120;i++){
          const x = (i*47 + (now*0.00012*i))%W;
          const y = ((i*73) % H);
          const r = (Math.sin((i+now*0.0003)) + 1.2) * 0.6;
          ctx.globalAlpha = 0.55 * Math.random();
          ctx.fillStyle = '#fff';
          ctx.beginPath();
          ctx.arc(x, y, r*0.6, 0, Math.PI*2);
          ctx.fill();
        }
        ctx.restore();

        // draw aurora bands (soft blurred)
        bands.forEach((b, idx)=>{
          b.phase += b.speed * dt * 60;
          const grd = ctx.createLinearGradient(0, b.y - b.amplitude, 0, b.y + b.amplitude*1.2);
          const hue = b.hue;
          grd.addColorStop(0, `hsla(${hue},70%,55%,0)`);
          grd.addColorStop(0.2, `hsla(${hue},60%,50%,0.06)`);
          grd.addColorStop(0.5, `hsla(${hue},60%,50%,0.12)`);
          grd.addColorStop(0.8, `hsla(${hue+30},70%,55%,0.06)`);
          grd.addColorStop(1, `hsla(${hue+50},80%,60%,0)`);
          ctx.fillStyle = grd;
          // draw a wavy ribbon
          ctx.beginPath();
          const step = Math.max(3, Math.floor(W/120));
          ctx.moveTo(0, b.y);
          for(let x=0;x<=W;x+=step){
            const y = b.y + Math.sin((x*0.004) + b.phase) * (b.amplitude * Math.sin((now*0.0002)+idx));
            ctx.lineTo(x, y);
          }
          ctx.lineTo(W, H);
          ctx.lineTo(0, H);
          ctx.closePath();
          ctx.fill();
        });

        // update & draw shooting stars
        for(let i=stars.length-1;i>=0;i--){
          const s = stars[i];
          s.x += s.vx;
          s.y += s.vy;
          s.life += dt;
          // draw tail
          ctx.save();
          ctx.globalAlpha = Math.max(0, 1 - s.life*0.12);
          const grad = ctx.createLinearGradient(s.x, s.y, s.x - s.vx*10, s.y - s.vy*10);
          grad.addColorStop(0, 'rgba(255,255,255,1)');
          grad.addColorStop(1, 'rgba(255,255,255,0)');
          ctx.strokeStyle = grad;
          ctx.lineWidth = s.size;
          ctx.beginPath();
          ctx.moveTo(s.x, s.y);
          ctx.lineTo(s.x - s.vx* (s.length/10), s.y - s.vy*(s.length/10));
          ctx.stroke();
          // head
          ctx.beginPath();
          ctx.fillStyle = 'white';
          ctx.arc(s.x, s.y, Math.max(1, s.size/1.2), 0, Math.PI*2);
          ctx.fill();
          ctx.restore();
          // remove if out of bounds
          if(s.x < -200 || s.x > W + 200 || s.life > 8) { stars.splice(i,1); }
        }

        requestAnimationFrame(draw);
      }
      requestAnimationFrame(draw);
    })();

    // ---------- BACKGROUND MUSIC TOGGLE ----------
    const bgAudio = document.getElementById('bgMusic');
    const musicBtn = document.getElementById('musicToggle');
    musicBtn.addEventListener('click', async ()=>{
      try{
        if(bgAudio.paused){
          await bgAudio.play();
          musicBtn.textContent = '‚è∏';
        } else {
          bgAudio.pause();
          musicBtn.textContent = '‚ñ∂';
        }
      } catch(e){ console.warn('Autoplay prevented', e); musicBtn.textContent = '‚ñ∂'; }
    });

    // ---------- TTS: front-end talk to /api/tts ----------
    document.getElementById('ttsSubmit').addEventListener('click', async ()=>{
      const text = document.getElementById('ttsText').value.trim();
      const status = document.getElementById('ttsStatus');
      const playback = document.getElementById('ttsPlayback');
      if(!text){ status.textContent = 'Write something first'; return; }
      status.textContent = 'Generating...';
      playback.style.display = 'none';
      try{
        const resp = await fetch('/api/tts', {
          method:'POST',
          headers:{'Content-Type':'application/json'},
          body: JSON.stringify({ text })
        });
        if(!resp.ok){
          const err = await resp.text();
          status.textContent = 'Error: ' + (err || resp.status);
          return;
        }
        const blob = await resp.blob();
        const url = URL.createObjectURL(blob);
        playback.src = url;
        playback.style.display = 'block';
        playback.play();
        status.textContent = 'Playing';
      } catch(err){ console.error(err); status.textContent = 'Network error'; }
    });

    // small accessibility: press Enter in input to submit
    document.getElementById('ttsText').addEventListener('keydown', function(e){ if(e.key === 'Enter'){ document.getElementById('ttsSubmit').click(); }});
  </script>
</body>
</html>
